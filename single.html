<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="utf-8">
        <title>Space Between Us</title>
        <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">

        <!-- Link Swiper's CSS -->
        <link rel="stylesheet" href="css/swiper.min.css">
        <link rel="stylesheet" href="css/styles.css">

        <script src="js/jquery-3.1.1.min.js"></script>
        <script src="js/script.js"></script>
        <!-- font awesome -->
        <script src="https://kit.fontawesome.com/ab8656d9ec.js" crossorigin="anonymous"></script>


        <!-- Demo styles -->
        <style>
            img#movie-image {
                width: 200px;
                height: 300px;
            }


        </style>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
    </head>

    <body>
        <div class="wrapper">

            <!-- Header -->
            <header class="header">
                <figure class="logo"><a href="index.html"><img src="images/logo.png" alt="Logo"></figure></a>
                <nav class="menu">
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="terms.html">About Us</a></li>
                        <li><a href="contact.html">Contact Us</a></li>
                    </ul>
                </nav>
            </header>

            <main class="content">
                <div class="single">

                    <section class="trailer">
                        <h3>Trailer</h3>
                        <div class="trailer_frame">
                            <!-- <iframe id="trailer" width="560" height="315" src="https://www.youtube.com/embed/x73-573aWfs" frameborder="0" allowfullscreen></iframe> -->
                            <iframe id="trailer" width="560" height="315" src="" frameborder="0" allowfullscreen></iframe>
                        </div>
                    </section>

                    <section class="movie">
                        <img id="movie-image" src="">
                        <ul id='movie-data'></ul>
                    </section>
                    <section class="links">
                        <h3>Times for Cinemas</h3>
                        <div id="cinemas" class="row">
                            <!-- <div class="col">
                                <ul class="dlinks">
                                    <li><a>Download</a></li>
                                    <li><a href="#">Link1</a></li>
                                    <li><a href="#">Link2</a></li>
                                    <li><a href="#">Link3</a></li>
                                </ul>
                            </div>
                            <div class="col">
                                <ul class="dlinks">
                                    <li><a>Watch</a></li>
                                    <li><a href="#">Link1</a></li>
                                    <li><a href="#">Link2</a></li>
                                    <li><a href="#">Link3</a></li>
                                </ul>
                            </div> -->
                        </div>
                    </section>

                    <section class="related">
                        <h3>Related movies</h3>
                        <div class="relatemovie">
                            <a href="#"><img src="images/2.jpg"></a>
                            <a href="#"><span class="relatedname">John Wick</span></a>
                        </div>
                        <div class="relatemovie">
                            <a href="#"><img src="images/3.jpg"></a>
                            <a href="#"><span class="relatedname">Spider Man Homecoming</span></a>
                        </div>
                        <div class="relatemovie">
                            <a href="#"><img src="images/4.jpg"></a>
                            <a href="#"><span class="relatedname">Beauty and Beast</span></a>
                        </div>
                        <div class="relatemovie">
                            <a href="#"><img src="images/5.jpg"></a>
                            <a href="#"><span class="relatedname">Pirates of the Caribbean: Dead Men Tell No
                                    Tales</span></a>
                        </div>
                        <div class="relatemovie">
                            <a href="#"><img src="images/6.jpg"></a>
                            <a href="#"><span class="relatedname">Fifty Shades Darker</span></a>
                        </div>
                        <div class="relatemovie">
                            <a href="#"><img src="images/7.jpg"></a>
                            <a href="#"><span class="relatedname">Transformers</span></a>
                        </div>

                    </section>

                    <section class="comments">
                        <h3>Comments</h3>
                    </section>
                </div>
            </main>
            <!-- Footer -->
            <footer class="footer sticky-bottom">
                <div class="row">
                    <div class="col-3">
                        <ul id="socialMedia">
                            <li id="pirmas"><a id="link" href="">Facebook <i class="fab fa-facebook-square"></i></a></li>
                            <li><a id="link" href="">Instagram <i class="fab fa-instagram"></i></a></li>
                        </ul>
                    </div>
                    <div class="col-6" style="color: rgb(121, 121, 121); text-align: center;">Movie flash &copy</div>
                    <div class="col-2" style="text-align: right;"><a id="link" href="#">info@movieflash.com</a></div>
                </div>
            </footer>

        </div>
        <script type="module">
            import movies, { index } from './data/movies.js';

            const url_string = window.location.href
            const url = new URL(url_string);
            const id = url.searchParams.get("id");
            const key = index[id];
            const movieData = movies[key];

            document.querySelector('#trailer').setAttribute('src', movieData['trailer'])
            document.querySelector('#movie-image').setAttribute('src', movieData['image'])
            let dataStr = `<li><h1>${movieData['title']}</h1></li>`;
            dataStr += `\n<li>${movieData['description']}</li>`;
            dataStr += `\n<li>` + movieData['genre'].map(item => `<a href="genre.html">${item}</a>`).join(', ') + `</li>`;
            dataStr += `\n<li>` + movieData['cast'].map(item => `<a href="cast.html">${item}</a>`).join(', ') + `</li>`;
            dataStr += `\n<li><h3>Score: ` + movieData['score'] + "/10" + `</h3></li>\n`
            document.querySelector('#movie-data').innerHTML = dataStr;

            const times = Object.entries(movieData['times']).map(
                cinema => `\n<div class="col">\n<ul class="dlinks">` +
                          `\n<li><a>${cinema[0]}</a></li>` + 
                          cinema[1].map(time => `\n<li><a href="#">${time}</a></li>`).join('') +
                          `\n</ul>\n</div>`
            );
            document.querySelector('#cinemas').innerHTML = times;
        </script>
    </body>

</html>
